---
const products = [
  {
    icon: "recsys",
    title: "Movie Recommender",
    description:
      "Rate a few films and get instant recommendations. ALS/ItemKNN plus DCNv2/MMoE variants.",
    href: "https://duku-ui.onrender.com/", // external -> new tab
  },
  {
    icon: "ai",
    title: "Goldminer Agent",
    description:
      "Point at a CSV or DB; it profiles, cleans, and trains a quick model with a readable report.",
    // no href yet -> Coming soon
  },
  {
    icon: "film",
    title: "Film-maker Agent",
    description:
      "Script-to-shots prototype: generates boards, voices, and rough cuts for a concept reel.",
  },
  {
    icon: "ops",
    title: "PocketAdmin",
    description:
      "An ops assistant that deploys, monitors, and reports on your ML jobs and costs.",
    // no href yet -> Coming soon
  },
  {
    icon: "cloud",
    title: "MLOps Sandbox",
    description:
      "Vertex AI/Kubeflow pipeline template with experiment tracking and model registry.",
  },
  {
    icon: "viz",
    title: "RecSys Metrics Board",
    description:
      "Interactive dashboard for NDCG@K, CTR/CVR, coverage, diversity, and more.",
  }
];

const isExternal = (href: string) =>
  href &&
  !href.startsWith("/") &&
  !href.startsWith("#") &&
  !href.startsWith("mailto:") &&
  !href.startsWith("tel:");
---

<section class="py-20 sm:py-28 bg-slate-950">
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
    <div class="space-y-8">
      <div class="text-center">
        <h2 class="text-3xl font-medium tracking-tight sm:text-4xl text-white">Products</h2>
        <p class="mt-3 text-lg text-slate-300 max-w-prose mx-auto">
          Hands-on demos you can click and try. Built fast, stable, and simple—so you can
          feel the value, not just read about it.
        </p>
      </div>

      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {products.map((item) => {
          const href = item.href ?? "";
          const external = href ? isExternal(href) : false;

          return (
            <article class="group flex flex-col gap-4 rounded-3xl bg-slate-900 p-6 ring-1 ring-slate-700 shadow-md transition hover:-translate-y-1 hover:shadow-[0_0_25px_rgba(99,102,241,0.30)]">
              <div class="text-3xl">
                {/* your SVG icons stay here (same as your current code) */}
              </div>

              <h3 class="text-xl font-semibold text-white">{item.title}</h3>
              <p class="text-slate-300 text-base">{item.description}</p>

              <div class="mt-2">
                {href ? (
                  <a
                    href={href}
                    target={external ? "_blank" : undefined}
                    rel={external ? "noopener noreferrer" : undefined}
                    class="inline-flex items-center gap-2 rounded-full bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-400"
                  >
                    {external ? "Open demo" : "View demo"} <span aria-hidden="true">→</span>
                  </a>
                ) : (
                  <button
                    type="button"
                    disabled
                    class="inline-flex items-center gap-2 rounded-full bg-slate-700/60 px-4 py-2 text-sm font-semibold text-slate-300 cursor-not-allowed"
                    title="Coming soon"
                  >
                    Coming soon
                  </button>
                )}
              </div>
            </article>
          );
        })}
      </div>
    </div>
  </div>
</section>